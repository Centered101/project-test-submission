<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîî Web Push Notification</title>
    <link rel="shortcut icon" href="https://project-test-submission.netlify.app/images/icon.svg" type="image/x-icon">
    <link rel="stylesheet" href="https://project-test-submission.netlify.app/style/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

</head>

<body class="flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-white">
    <div class="p-8 bg-white shadow-2xl rounded-2xl text-center space-y-6 max-w-md w-full border border-gray-200">
        <h1 class="text-3xl font-extrabold text-blue-600 flex items-center justify-center gap-2">
            üîî Web Push Notification
        </h1>
        <div class="w-full bg-gray-100 border border-dashed border-gray-300 rounded-xl overflow-hidden p-4">
            <img class="w-56 mx-auto duration-300"
                src="https://project-test-submission.netlify.app/images/icon.svg" alt="Notification Icon">
        </div>
        <div class="flex items-center justify-center gap-4">
            <button id="requestPermission"
                class="px-5 py-2.5 border rounded-xl transition font-semibold">
                ‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            </button>
            <button id="testNotification"
                class="px-5 py-2.5 border rounded-xl transition font-semibold">
                ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            </button>
        </div>
    </div>

    <script>
        window.onload = function () {
            Toastify({
                text: "üëã ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö! ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠",
                duration: 5000,
                destination: "/",
                newWindow: true,
                gravity: "top",
                position: "center",
            }).showToast();
        };
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("sw.js").then(registration => {
                console.log("‚úÖ Service Worker ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", registration);
            }).catch(error => {
                console.log("‚ùå Service Worker ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:", error);
            });
        }

        // ‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        document.getElementById("requestPermission").addEventListener("click", async () => {
            const permission = await Notification.requestPermission();
            if (permission === "granted") {
                Toastify({
                    text: "‚úÖ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß!",
                    duration: 1500,
                    newWindow: true,
                    gravity: "top",
                    position: "left",
                }).showToast();
                navigator.serviceWorker.ready.then(registration => {
                    registration.showNotification("üîî ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö", {
                        body: "‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô üöÄ\n‚úÖ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß!",
                        icon: "https://project-test-submission.netlify.app/images/Test-D‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö.webp"
                    });
                });
            } else {
                Toastify({
                    text: "‚ùå ‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",
                    duration: 1500,
                    newWindow: true,
                    gravity: "top",
                    position: "left",
                }).showToast();
            }
        });

        // ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        document.getElementById("testNotification").addEventListener("click", () => {
            if (Notification.permission === "granted") {
                navigator.serviceWorker.ready.then(registration => {
                    registration.showNotification("üîî ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö", {
                        body: "‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô üöÄ",
                        icon: "https://project-test-submission.netlify.app/images/icon.svg"
                    });
                });
            } else {
                Toastify({
                    text: "‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô!",
                    duration: 1500,
                    newWindow: true,
                    gravity: "top",
                    position: "left",
                }).showToast();
            }
        });
    </script>
</body>

</html>