
<!-- ########  ########  ###   ##  ########  ########  #######   ########  #######   ##  ########  ## -->
<!-- ##        ##        ## #  ##     ##     ##        ##    ##  ##        ##    ##  ##  ##    ##  ## -->
<!-- ##        ######    ##  # ##     ##     ######    #######   ######    ##    ##  ##  ##    ##  ## -->
<!-- ##        ##        ##   ###     ##     ##        ##   ##   ##        ##    ##  ##  ##    ##  ## -->
<!-- ########  ########  ##    ##     ##     ########  ##    ##  ########  #######   ##  ########  ## -->

<!DOCTYPE html>
<html lang="th">

<!-- ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ‡∏ß‡∏±‡∏¢‡∏™‡∏∞‡∏£‡∏∏‡πâ‡∏ô Hello, World! ‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡πà‡∏∞ -->

<head>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="HTML,CSS,XML,JavaScript,Centered101" />
    <meta name="author" content="‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î ‚Äî Centered101" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Primary Meta Tags -->
    <title>‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î ‚Ä¢ Centered101</title>
    <meta name="title" content="‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î ‚Äî Centered101" />
    <meta name="description" content="‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://project-test-submission.netlify.app/‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö-Local-Storage/" />
    <meta property="og:title" content="‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö Local Storage ‚Äî Centered101" />
    <meta property="og:description" content="‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö Local Storage" />
    <meta property="og:image" content="https://project-test-submission.netlify.app/images/Tes-D.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://project-test-submission.netlify.app/‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö-Local-Storage/" />
    <meta property="twitter:title" content="‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö Local Storage ‚Äî Centered101" />
    <meta property="twitter:description" content="‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö Local Storage" />
    <meta property="twitter:image" content="https://project-test-submission.netlify.app/images/Tes-D.png" />

    <link rel="icon" type="image/png" href="https://project-test-submission.netlify.app/images/Tes-D.png">
    
    <script src="/animation/script.js"></script>

</head>
<style>
    /* font ‡∏à‡∏≤‡∏Å google fonts */
    /* font-family: 'Press Start 2P', system-ui; */
    @import url("https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap");
    /* font-family: 'Bai Jamjuree', sans-serif; */
    @import url("https://fonts.googleapis.com/css2?family=Bai+Jamjuree&display=swap");

    * {
        margin: 0;
        padding: 0;
        outline: 0;
        box-sizing: border-box;
    }

    html {
        scrollbar-width: thin;
        scroll-behavior: smooth;
    }

    body {
        font-family: 'Bai Jamjuree', sans-serif;
    }

    h1 {
        text-align: center;
        margin: 20px;
    }

    form#birthday-form {
        width: 480px;
        display: none;
        margin: 20px auto;
        padding: 20px;

        label {
            text-wrap: nowrap;
        }
    }

    input,
    form#birthday-form button,
    header select,
    header button {
        margin: 10px;
        padding: 10px;
        font-size: 16px;
    }

    input[type="date"],
    button,
    select,
    option {
        cursor: pointer;
    }

    header button::after,
    div.buttons button::after {
        content: "";
        display: inline-block;
        background-size: cover;
        width: 1rem;
        height: 1rem;
    }

    div.editFriend {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #ffffff;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        padding: 20px;
        z-index: 1000;
        border-radius: 8px;
        width: 300px;
    }

    div.editFriend-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    div.editFriend-actions {
        display: flex;
        justify-content: space-between;
    }

    header {
        position: sticky;
        top: 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        backdrop-filter: blur(12px);
        box-shadow: 0px 10px 10px 0px rgba(0, 0, 0, 0.1);

        select {
            min-width: 160px;
            background-color: #efefef;
        }

        button {
            min-width: 160px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
        }

        button#add-btn::after {
            background-image: url("/images/img/add.png");
        }

        button#see-btn::after {
            background-image: url("/images/img/visibility.png");
            width: 1.25rem;
            height: 1.25rem;
        }
    }

    div.friend-list {
        margin-top: 20px;

        div.friend-item {
            margin: 10px;
            padding-top: 10px;
            border: solid #cccccc 1px;
            border-radius: 5px;
            background-color: #f9f9f9;
            display: flex;
            justify-content: space-between;
            align-items: start;
        }

        div.friend-details {
            border-right: solid #cccccc 1px;
            width: 100%;
            padding-left: 10px;
            display: flex;
            flex-direction: column;
            white-space: nowrap;
            overflow-x: auto;

            div.friend-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                font-size: 18px;
                width: 100%;
                padding-bottom: 10px;
                border-bottom: solid #cccccc 1px;
                gap: 5px;

                span.friend-name {
                    font-weight: bold;
                }

                span.friend-birthday {
                    padding-right: 10px;
                    font-size: 14px;
                }
            }

            div.friend-countdown {
                margin-top: 10px;
                font-size: 16px;
                color: #333333;
            }
        }

        div.buttons {
            margin: 0 10px 10px;
            display: flex;
            flex-direction: column;
            gap: 12px;

            button.delete-btn,
            button.edit-btn {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0 5px;
                width: 30px;
                height: 25px;
            }

            button.delete-btn::after {
                background-image: url("/images/img/delete.png");
            }

            button.edit-btn::after {
                background-image: url("/images/img/edit.png");
            }
        }
    }

    footer {
        margin: 20px;

        p {
            text-align: center;
            font-size: 16px;
        }
    }
</style>

<body class="animationShow">
    <h1 class="animationShow-x">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</h1>
    <form id="birthday-form" action="" method="post">
        <label for="friend-name">‡∏ä‡∏∑‡πà‡∏≠:</label>
        <input type="text" id="friend-name" maxlength="30" required>
        <br>
        <label for="friend-birthday">‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:</label>
        <input type="date" id="friend-birthday" required>
        <br>
        <button type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </form>
    <div class="editFriend" id="editFriend" style="display: none;">
        <div class="editFriend-container">
            <h3>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</h3>
            <form id="editFriendForm">
                <label for="edit-name">‡∏ä‡∏∑‡πà‡∏≠:</label>
                <input type="text" id="edit-name" required />
                <label for="edit-birthday">‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:</label>
                <input type="date" id="edit-birthday" required />
                <div class="editFriend-actions">
                    <button type="submit" class="save-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    <button type="button" class="cancel-btn" id="cancelEdit">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>
    <header class="animationShow-x">
        <select id="sort-select">
            <option value="createdDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°</option>
            <option value="name">‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠</option>
            <option value="birthday">‡πÉ‡∏Å‡∏•‡πâ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</option>
            <option value="pastBirthdays">‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß</option>
        </select>
        <button id="add-btn" onclick="addBirthday()">‡πÄ‡∏û‡∏∑‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠</button>
        <button id="see-btn" onclick="addBirthday()" style="display: none;">‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠</button>
    </header>
    <div class="friend-list" id="friend-list"></div>
</body>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const friendList = document.getElementById("friend-list");
        const sortSelect = document.getElementById("sort-select");
        const friends = JSON.parse(localStorage.getItem("friends")) || [];
        let countdownIntervals = {}; // ‡πÄ‡∏Å‡πá‡∏ö ID ‡∏Ç‡∏≠‡∏á Interval ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô

        const renderFriends = () => {
            if (!friendList) return; // ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ friend-list ‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≤‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ
            friendList.innerHTML = ""; // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤

            // ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á
            const sortedFriends = getSortedFriends();

            sortedFriends.forEach((friend, index) => {
                const listItem = document.createElement("div");
                listItem.id = `friend-list-${index}`; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î id ‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                listItem.classList.add("friend-item");

                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
                const today = new Date();
                const birthday = new Date(friend.birthday);
                birthday.setFullYear(today.getFullYear());

                // ‡∏õ‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏õ‡∏µ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                if (birthday < today) {
                    birthday.setFullYear(today.getFullYear() + 1); // ‡∏´‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏µ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                }

                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
                const diffTime = birthday - today;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô

                // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç
                let backgroundColor = "#F9F9F9"; // ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
                if (diffDays === 0) {
                    backgroundColor = "#FF7070"; // ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
                } else if (diffDays <= 7) {
                    backgroundColor = "#E8D6001A"; // ‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î (7 ‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô)
                } else if (today > birthday) {
                    backgroundColor = "#00CC4F1A"; // ‡πÄ‡∏•‡∏¢‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß:
                }

                listItem.innerHTML = `
                <div class="friend-details">
                    <div class="friend-header">
                        <span class="friend-name">${friend.name} ${diffDays === 0 ? "üéâ" : ""}</span>
                        <span class="friend-birthday">${friend.birthday}</span>
                    </div>
                    <div class="friend-countdown" id="countdown-${index}">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...</div>
                </div>
                <div class="buttons">
                    <button class="delete-btn" data-index="${index}"></button>
                    <button class="edit-btn" data-index="${index}"></button>
                </div>
            `;

                // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ `id="friend-list-${index}"`
                listItem.style.backgroundColor = backgroundColor;

                friendList.appendChild(listItem);

                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå
                updateCountdown(index, friend.birthday);
            });
        };

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        const getSortedFriends = () => {
            const sortType = sortSelect ? sortSelect.value : "createdDate";

            if (sortType === "createdDate") {
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏° (‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô)
                return friends.slice().sort((a, b) => {
                    const aCreated = new Date(a.createdDate);
                    const bCreated = new Date(b.createdDate);
                    return bCreated - aCreated; // ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô
                });
            } else if (sortType === "name") {
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠ (A-Z)
                return friends.slice().sort((a, b) => a.name.localeCompare(b.name));
            } else if (sortType === "birthday") {
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î (‡πÉ‡∏Å‡∏•‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô)
                const today = new Date();

                return friends.slice().sort((a, b) => {
                    const aBirthday = new Date(a.birthday);
                    const bBirthday = new Date(b.birthday);

                    // ‡∏õ‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                    aBirthday.setFullYear(today.getFullYear());
                    bBirthday.setFullYear(today.getFullYear());

                    // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏õ‡∏µ‡∏´‡∏ô‡πâ‡∏≤
                    if (aBirthday < today) aBirthday.setFullYear(today.getFullYear() + 1);
                    if (bBirthday < today) bBirthday.setFullYear(today.getFullYear() + 1);

                    return aBirthday - bBirthday; // ‡πÉ‡∏Å‡∏•‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô
                });
            } else if (sortType === "pastBirthdays") {
                // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
                const today = new Date();

                return friends.slice().filter((friend) => {
                    const friendBirthday = new Date(friend.birthday);
                    friendBirthday.setFullYear(today.getFullYear());

                    // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß
                    return friendBirthday < today;
                }).sort((a, b) => {
                    const aBirthday = new Date(a.birthday);
                    const bBirthday = new Date(b.birthday);
                    return bBirthday - aBirthday; // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á
                });
            }

            return friends;
        };

        // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
        sortSelect.addEventListener("change", () => {
            renderFriends(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á
        const updateCountdown = (index, birthday) => {
            const countdownElement = document.getElementById(`countdown-${index}`);

            if (countdownIntervals[index]) {
                clearInterval(countdownIntervals[index]); // ‡∏•‡∏ö Interval ‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
            }

            const calculateCountdown = () => {
                const today = new Date();
                const nextBirthday = new Date(birthday);
                nextBirthday.setFullYear(today.getFullYear());
                if (nextBirthday < today) {
                    nextBirthday.setFullYear(today.getFullYear() + 1);
                }

                const diffTime = nextBirthday - today;

                const days = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diffTime % (1000 * 60)) / 1000);

                countdownElement.textContent = `${days} ‡∏ß‡∏±‡∏ô ${hours} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${minutes} ‡∏ô‡∏≤‡∏ó‡∏µ ${seconds} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
            };

            calculateCountdown();
            countdownIntervals[index] = setInterval(calculateCountdown, 1000); // ‡πÄ‡∏Å‡πá‡∏ö ID Interval ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏≠‡πá‡∏≠‡∏ö‡πÄ‡∏à‡∏Å‡∏ï‡πå
        };

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô
        const deleteFriend = (index) => {
            friends.splice(index, 1); // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå
            localStorage.setItem("friends", JSON.stringify(friends)); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Local Storage
            renderFriends(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        };

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô
        const editFriend = (index) => {
            const newName = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà:", friends[index].name);
            const newBirthday = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà (yyyy-mm-dd):", friends[index].birthday);

            if (newName && newBirthday && !isNaN(new Date(newBirthday).getTime())) {
                friends[index].name = newName;
                friends[index].birthday = newBirthday;
                localStorage.setItem("friends", JSON.stringify(friends)); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Local Storage
                renderFriends(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            } else {
                showToast("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!");
            }
        };

        if (friendList) {
            renderFriends(); // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô
            friendList.addEventListener("click", (e) => {
                if (e.target.classList.contains("delete-btn")) {
                    const index = e.target.dataset.index;
                    deleteFriend(index);
                } else if (e.target.classList.contains("edit-btn")) {
                    const index = e.target.dataset.index;
                    editFriend(index);
                }
            });

            if (sortSelect) {
                sortSelect.addEventListener("change", renderFriends); // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á
            }
        }

        // ‡∏´‡∏≤‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô index.html ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        const form = document.getElementById("birthday-form");
        if (form) {
            form.addEventListener("submit", (e) => {
                e.preventDefault();
                const name = document.getElementById("friend-name").value;
                const birthday = document.getElementById("friend-birthday").value;

                if (!name || !birthday || isNaN(new Date(birthday).getTime())) {
                    showToast("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
                    return;
                }

                friends.push({ name, birthday }); // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
                localStorage.setItem("friends", JSON.stringify(friends)); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Local Storage
                renderFriends(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                form.reset(); // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°
            });
        }
    });

    let i = true;

    function addBirthday() {
        if (i) {
            document.documentElement.scrollTop = 0;
            document.querySelector("h1").textContent = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î";
            document.getElementById("birthday-form").style.display = "grid";
            document.getElementById("add-btn").style.display = "none";
            document.getElementById("see-btn").style.display = "flex";
        } else {
            document.querySelector("h1").textContent = "‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î";
            document.getElementById("birthday-form").style.display = "none";
            document.getElementById("add-btn").style.display = "flex";
            document.getElementById("see-btn").style.display = "none";
        }
        i = !i;
    }

</script>

</html>