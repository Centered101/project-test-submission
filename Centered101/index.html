<!doctype html>
<html lang="en">

<head>
    <title>GitHub Profile - Centered101</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="theme-color" content="#409EFE">
    <meta name="keywords" content="HTML, CSS, XML, JavaScript, Centered101">
    <meta name="author" content="Centered101">
    <meta name="description" content="GitHub Profile">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://project-test-submission.netlify.app">
    <meta property="og:title" content="GitHub Profile - Centered101">
    <meta property="og:description" content="GitHub Profile">
    <meta property="og:image" content="/images/Tes-D.webp">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://project-test-submission.netlify.app">
    <meta property="twitter:title" content="GitHub Profile - Centered101">
    <meta property="twitter:description" content="GitHub Profile">
    <meta property="twitter:image" content="/images/Tes-D.webp">

    <link rel="shortcut icon" type="image/x-icon" href="/images/Tes-D.webp">
    <link rel="stylesheet" href="/style/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-sceen font-black select-none" draggable="false" oncontextmenu="return false">
    <main class=" mx-auto space-y-12 mb-8">
        <!-- โปรไฟล์ GitHub -->
        <section class="space-y-4">
            <div class="w-full flex items-center justify-center gap-4 pt-12 px-6">
                <img id="profile-img" class="size-24 rounded-full md:size-56 md:rounded-0" draggable="false"
                    oncontextmenu="return false">
                <div class="w-full flex flex-wrap justify-start items-center gap-y-4">
                    <h class="basis-full text-xl flex items-center gap-2 px-2 md:text-3xl" id="profile-name">
                    </h>
                    <label for="repo"
                        class="max-w-sm flex-1 flex flex-col-reverse gap-2 p-2 cursor-pointer active:bg-[#E3F2FD] ease-in-out duration-300">
                        Repositories<span id="repo-count"></span>
                    </label>
                    <label for="followers"
                        class="max-w-sm flex-1 flex flex-col-reverse gap-2 p-2 cursor-pointer active:bg-[#E3F2FD] ease-in-out duration-300">
                        Followers<span id="followers-count"></span>
                    </label>
                    <label for="following"
                        class="max-w-sm flex-1 flex flex-col-reverse gap-2 p-2 cursor-pointer active:bg-[#E3F2FD] ease-in-out duration-300">
                        Following<span id="following-count"></span>
                    </label>
                </div>
            </div>

            <div class="flex flex-col justify-start gap-4 px-6 md:flex-row md:items-center">
                <div class="flex-1">
                    <p id="profile-location"></p>
                    <p id="profile-bio" class="w-2/"></p>
                </div>

                <div class="flex-1 flex flex-row items-center gap-2">
                    <a title="Follow" aria-label="Follow"
                        href="https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fcentered101%2F"
                        class="relative w-full flex justify-center items-center gap-2 bg-[#409EFE] border border-[#409EFE] rounded-lg text-[#FFF] truncate px-2 py-1 overflow-hidden ease-in-out duration-300 md:max-w-sm hover:bg-transparent hover:border-[#000] hover:text-[#0D0D0D]">
                        <span class=truncate>Follow</span>
                    </a>
                    <a title="Message" aria-label="Message" href=https://instagram.com/direct/t/17848003478856472/
                        class="relative w-full flex justify-center items-center gap-2 border border-[#000] rounded-lg truncate px-2 py-1 overflow-hidden ease-in-out duration-300 md:max-w-sm hover:bg-transparent">
                        <span class=truncate>Message</span>
                    </a>
                </div>
            </div>
        </section>

        <section id="deploy" class="w-full flex flex-wrap place-content-around items-center gap-4 border-t">

            <input hidden id="projects" class="peer/projects" type="radio" name="status" checked />
            <label for="projects"
                class="truncate border-t peer-checked/projects:border-[#409EFE] flex items-center gap-2 p-2 cursor-pointer ease-in-out duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1"
                    width="16" data-view-component="true" class="w-[1em] h-[1em]">
                    <path
                        d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM6.5 6.5v8h7.75a.25.25 0 0 0 .25-.25V6.5Zm8-1.5V1.75a.25.25 0 0 0-.25-.25H6.5V5Zm-13 1.5v7.75c0 .138.112.25.25.25H5v-8ZM5 5V1.5H1.75a.25.25 0 0 0-.25.25V5Z" />
                </svg>
            </label>

            <!-- Repository -->
            <input hidden id="repo" class="peer/repo" type="radio" name="status" />
            <label for="repo"
                class="truncate border-t peer-checked/repo:border-[#409EFE] flex items-center gap-2 p-2 cursor-pointer ease-in-out duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="w-[1em] h-[1em]">
                    <path
                        d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z" />
                </svg>
            </label>

            <!-- Followers -->
            <input hidden id="followers" class="peer/followers" type="radio" name="status" />
            <label hidden for="followers"
                class="truncate border-t peer-checked/followers:border-[#409EFE] items-center gap-2 p-2 cursor-pointer ease-in-out duration-300 md:flex">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="w-[1em] h-[1em]">
                    <path
                        d="M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z" />
                </svg>
            </label>

            <!-- Following -->
            <input hidden id="following" class="peer/following" type="radio" name="status" />
            <label hidden for="following"
                class="truncate border-t peer-checked/following:border-[#409EFE] items-center gap-2 p-2 cursor-pointer ease-in-out duration-300 md:flex">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="w-[1em] h-[1em]">
                    <path
                        d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z" />
                </svg>
            </label>

            <ul hidden id="projects-list"
                class="w-full grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-0 truncate px-0 peer-checked/projects:grid">
            </ul>

            <!-- รายชื่อ Repo -->
            <ul hidden id="repo-list"
                class="w-full grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-2 truncate px-6 peer-checked/repo:grid">
            </ul>

            <!-- รายชื่อผู้ติดตาม -->
            <ul hidden id="followers-list" class="w-full gap-2 truncate px-0 peer-checked/followers:grid"></ul>

            <!-- รายชื่อที่กำลังติดตาม -->
            <ul hidden id="following-list" class="w-full gap-2 truncate px-0 peer-checked/following:grid"></ul>

        </section>
    </main>

    <script>
        const username = "Centered101";

        async function fetchData(url, callback) {
            try {
                const response = await fetch(url);
                const data = await response.json();
                callback(data);
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        // ดึงข้อมูลโปรไฟล์
        fetchData(`https://api.github.com/users/${username}`, data => {
            document.getElementById("profile-img").src = data.avatar_url || "/images/img/noitems.svg";
            document.getElementById("profile-name").innerHTML = data.login + `<svg class="w-[1em] h-[1em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="#409EFE"><path d="m344-60-76-128-144-32 14-148-98-112 98-112-14-148 144-32 76-128 136 58 136-58 76 128 144 32-14 148 98 112-98 112 14 148-144 32-76 128-136-58-136 58Zm34-102 102-44 104 44 56-96 110-26-10-112 74-84-74-86 10-112-110-24-58-96-102 44-104-44-56 96-110 24 10 112-74 86 74 84-10 114 110 24 58 96Zm102-318Zm-42 142 226-226-56-58-170 170-86-84-56 56 142 142Z"/></svg>`;
            document.getElementById("profile-location").innerText = data.location || '';
            document.getElementById("profile-bio").innerText = data.bio || '';
            document.getElementById("repo-count").innerText = data.public_repos || 0;
            document.getElementById("followers-count").innerText = data.followers || 0;
            document.getElementById("following-count").innerText = data.following || 0;
        });

        // ดึงรายชื่อ Repo
        fetchData(`https://api.github.com/users/${username}/repos`, repos => {
            const repoList = document.getElementById("repo-list");
            repoList.innerHTML = repos.map(repo =>
                `
<li>
    <a title='${repo.name} - ${repo.language || ""}' href="${repo.html_url}" class="flex flex-col gap-2 border rounded hover:bg-[#E3F2FD] border-[#409EFE] p-4">
        <span class="flex items-center gap-2">
            <img src="${repo.owner.avatar_url}" width="24" class="border rounded-full">
            <span class="text-sm font-normal truncate">${repo.owner.login}</span>
        </span>
        <span class="truncate">${repo.name}</span>
        <span class="text-sm font-normal truncate">${repo.language || "•"}</span>
    </a>
</li>`
            ).join("");
        });


        // ดึงรายชื่อผู้ติดตาม
        fetchData(`https://api.github.com/users/${username}/followers`, followers => {
            document.getElementById("followers-list").innerHTML = followers.map(follower =>
                `
<li class="flex justify-between items-center gap-2 rounded font-normal px-4 py-2 active:bg-[#E3F2FD]">
    <a title="${follower.login}" href="${follower.html_url}" class="flex items-center gap-2">
        <img src="${follower.avatar_url}" width="32" class="flex-1 border rounded-full">
        <span>${follower.login}</span>
    </a>
    <a title="Follow" aria-label="Follow" href="${follower.html_url}"
        class="relative max-w-32 flex-1 flex justify-center items-center gap-2 bg-[#409EFE] border border-[#409EFE] rounded-lg text-[#FFF] truncate px-2 py-1 overflow-hidden ease-in-out duration-300 hover:bg-transparent hover:border-[#000] hover:text-[#0D0D0D]">
        <span class="truncate">Follow</span>
    </a>
</li>`
            ).join("");
        });

        // ดึงรายชื่อที่กำลังติดตาม
        fetchData(`https://api.github.com/users/${username}/following`, following => {
            document.getElementById("following-list").innerHTML = following.map(user =>
                `
<li class="flex justify-between items-center gap-2 rounded font-normal px-4 py-2 active:bg-[#E3F2FD]">
    <a title="${user.login}" href="${user.html_url}" class="flex items-center gap-2">
        <img src="${user.avatar_url}" width="32" class="flex-1 border rounded-full">
        <span>${user.login}</span>
    </a>
    <a title="Follow" aria-label="Follow" href="${user.html_url}"
        class="relative max-w-32 flex-1 flex justify-center items-center gap-2 bg-[#409EFE] border border-[#409EFE] rounded-lg text-[#FFF] truncate px-2 py-1 overflow-hidden ease-in-out duration-300 hover:bg-transparent hover:border-[#000] hover:text-[#0D0D0D]">
        <span class="truncate">Follow</span>
    </a>
</li>`
            ).join("");
        });

        document.addEventListener("DOMContentLoaded", () => {
            const radios = document.querySelectorAll('input[name="status"]');

            // ตั้งค่า fill เริ่มต้นให้กับ repo
            const defaultSvg = document.querySelector('label[for="projects"] svg');
            if (defaultSvg) {
                defaultSvg.style.fill = "#409EFE";
            }

            radios.forEach(radio => {
                radio.addEventListener("change", (event) => {
                    document.querySelectorAll("label svg").forEach(svg => {
                        svg.style.fill = ""; // รีเซ็ตค่า fill
                    });

                    const selectedLabel = document.querySelector(`label[for="${event.target.id}"] svg`);
                    if (selectedLabel) {
                        selectedLabel.style.fill = "#409EFE"; // กำหนดสี fill ตามต้องการ
                    }
                });
            });
        });

        const urls = [
            { name: "portfolio-centered101", link: "https://portfolio-centered101.netlify.app/", img: "" },
            { name: "project-test-submission", link: "https://project-test-submission.netlify.app/", img: "" },
            { name: "asia-LB", link: "https://asia-lb.web.app/", img: "" }
        ];

        const defaultImage = "/images/img/noitems.svg"; // 📌 รูปเริ่มต้น
        const projectsList = document.getElementById('projects-list');

        urls.forEach(({ name, link, img }) => {
            const listItem = document.createElement('li');
            listItem.innerHTML = `
                <a title="${name}" href="${link}" class="group overflow-hidden">
                    <img draggable="false" oncontextmenu="return false;" data-nimg="1" 
                    class="block w-full h-56 object-cover brightness-100 group-hover:brightness-75 ease-out duration-300"
                        src="${img || defaultImage}">
                    <div translate="no" class="flex flex-col space-y-2 p-6">
                        <p class="text-[#409EFE] truncate capitalize">${name}</p>
                        <p class="truncate font-normal">${link}</p>
                    </div>
                </a>
            `;
            projectsList.appendChild(listItem);
        });

        // —[ Progress Bar ]———————————————————————————————————————————————————————————————————————————————————————————————————
        document.body.innerHTML += `
    <div id="progressbar" role="progressbar" aria-hidden="true" class="fixed inset-x-0 top-0 left-0 h-1 opacity-0 z-50">
        <div id="progressbar-fill" class="w-0 h-full bg-gradient-to-r from-[#84D4FA] to-[#409EFE] transition-all duration-1000 ease-in-out"></div>
    </div>
`;

        // Progress Bar
        document.addEventListener("DOMContentLoaded", function () {
            let progressBar = document.getElementById('progressbar-fill');
            let progressContainer = document.getElementById('progressbar');

            progressBar.style.width = "0";
            progressContainer.style.opacity = "1"; // แสดง progress bar

            let progress = 0;
            let interval = setInterval(() => {
                progress += 1;
                progressBar.style.width = progress + "%";

                // ปิดการใช้งาน element ที่ต้องการ
                document.getElementById('deploy')?.classList.add('animate-pulse');
                document.querySelectorAll('a, img, label').forEach(el => {
                    el.classList.add('animate-pulse', 'pointer-events-none', 'opacity-50');
                });

                document.querySelectorAll('a').forEach(el => {
                    el.addEventListener('click', disableLink);
                });

                document.querySelectorAll('input[type="radio"]').forEach(el => {
                    el.disabled = true;
                });

                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        progressContainer.style.opacity = "0"; // ซ่อน progress bar

                        // เปิดใช้งาน element กลับคืน
                        document.getElementById('deploy')?.classList.remove('animate-pulse');
                        document.querySelectorAll('a, img, label').forEach(el => {
                            el.classList.remove('animate-pulse', 'pointer-events-none', 'opacity-50');
                        });

                        document.querySelectorAll('a').forEach(el => {
                            el.removeEventListener('click', disableLink);
                        });

                        document.querySelectorAll('input[type="radio"]').forEach(el => {
                            el.disabled = false; // เปิดใช้งานกลับคืน
                        });

                    }, 500);
                }
            }, 25);
        });

        // ฟังก์ชันปิดการใช้งานลิงก์
        function disableLink(event) {
            event.preventDefault();
        }

    </script>

</body>

</html>